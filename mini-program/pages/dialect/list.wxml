<view class="container">
  <!-- åœ°åŒºç­›é€‰ -->
  <view class="filter-bar">
    <view class="region-filter">
      <picker mode="multiSelector" range="{{regionArray}}" bindchange="onRegionChange" bindcolumnchange="onRegionColumnChange">
        <view class="picker-value">{{selectedRegion || 'é€‰æ‹©åœ°åŒº'}}</view>
      </picker>
    </view>
    <view class="search-box">
      <input placeholder="æœç´¢æ–¹è¨€..." value="{{keyword}}" bindinput="onSearchInput" />
      <text class="search-icon">ğŸ”</text>
    </view>
  </view>

  <!-- æ–¹è¨€åˆ—è¡¨ -->
  <view class="dialect-list">
    <view class="dialect-card" wx:for="{{dialects}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
      <view class="dialect-left">
        <view class="play-btn" catchtap="playAudio" data-id="{{item.id}}" data-url="{{item.audio_url}}">
          <text class="play-icon">{{playingId === item.id ? 'â¸' : 'â–¶'}}</text>
        </view>
        <view class="dialect-info">
          <view class="dialect-title">{{item.title}}</view>
          <view class="dialect-location">ğŸ“ {{item.province}} {{item.city}} {{item.district}}</view>
          <view class="dialect-tags" wx:if="{{item.tags.length > 0}}">
            <text class="tag" wx:for="{{item.tags}}" wx:for-item="tag" wx:key="id">{{tag.name}}</text>
          </view>
        </view>
      </view>
      <view class="dialect-right">
        <view class="duration">{{formatDuration(item.duration)}}</view>
        <view class="stats">
          <text class="stat-item">â–¶ {{item.play_count}}</text>
          <text class="stat-item">â¤ {{item.like_count}}</text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{dialects.length === 0 && !loading}}">
      <image class="empty-icon" src="/assets/empty.png" mode="aspectFit" />
      <text class="empty-text">æš‚æ— æ–¹è¨€è®°å½•</text>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{dialects.length > 0}}">
    <text wx:if="{{loading}}">åŠ è½½ä¸­...</text>
    <text wx:elif="{{noMore}}">æ²¡æœ‰æ›´å¤šäº†</text>
    <text wx:else bindtap="loadMore">ç‚¹å‡»åŠ è½½æ›´å¤š</text>
  </view>

  <!-- å½•éŸ³æŒ‰é’® -->
  <view class="fab-btn" bindtap="goToCreate">
    <text class="fab-icon">ğŸ¤</text>
  </view>
</view>
