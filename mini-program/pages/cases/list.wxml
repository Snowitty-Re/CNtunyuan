<view class="container">
  <!-- æœç´¢å’Œç­›é€‰ -->
  <view class="filter-bar">
    <view class="search-box">
      <text class="icon-search">ğŸ”</text>
      <input type="text" placeholder="æœç´¢å§“åã€åœ°ç‚¹..." value="{{keyword}}" bindinput="onSearchInput" confirm-type="search" bindconfirm="onSearch" />
    </view>
    <view class="filter-tabs">
      <view class="filter-tab {{currentStatus === '' ? 'active' : ''}}" bindtap="switchStatus" data-status="">å…¨éƒ¨</view>
      <view class="filter-tab {{currentStatus === 'missing' ? 'active' : ''}}" bindtap="switchStatus" data-status="missing">å¤±è¸ªä¸­</view>
      <view class="filter-tab {{currentStatus === 'searching' ? 'active' : ''}}" bindtap="switchStatus" data-status="searching">å¯»æ‰¾ä¸­</view>
      <view class="filter-tab {{currentStatus === 'found' ? 'active' : ''}}" bindtap="switchStatus" data-status="found">å·²æ‰¾åˆ°</view>
    </view>
  </view>

  <!-- æ¡ˆä»¶åˆ—è¡¨ -->
  <view class="case-list">
    <view class="case-card" wx:for="{{cases}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
      <view class="case-header">
        <image class="case-photo" src="{{item.photos[0]?.url || '/assets/default-avatar.png'}}" mode="aspectFill" />
        <view class="case-info">
          <view class="case-title">
            <text class="case-name">{{item.name}}</text>
            <text class="case-age">{{item.age}}å²</text>
          </view>
          <view class="case-type">
            <text class="type-tag {{item.case_type}}">{{caseTypeMap[item.case_type]}}</text>
            <text class="status-tag {{item.status}}">{{statusMap[item.status]}}</text>
          </view>
          <view class="case-location">ğŸ“ {{item.missing_location}}</view>
          <view class="case-time">{{item.missing_time}}</view>
        </view>
      </view>
      <view class="case-footer">
        <view class="case-stats">
          <text class="stat-item">ğŸ‘ {{item.view_count}}</text>
          <text class="stat-item">â†—ï¸ {{item.share_count}}</text>
        </view>
        <view class="case-no">{{item.case_no}}</view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{cases.length === 0 && !loading}}">
      <image class="empty-icon" src="/assets/empty.png" mode="aspectFit" />
      <text class="empty-text">æš‚æ— ç›¸å…³æ¡ˆä»¶</text>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{cases.length > 0}}">
    <text wx:if="{{loading}}">åŠ è½½ä¸­...</text>
    <text wx:elif="{{noMore}}">æ²¡æœ‰æ›´å¤šäº†</text>
    <text wx:else bindtap="loadMore">ç‚¹å‡»åŠ è½½æ›´å¤š</text>
  </view>

  <!-- æ–°å¢æŒ‰é’® -->
  <view class="fab-btn" bindtap="goToCreate">
    <text class="fab-icon">+</text>
  </view>
</view>
