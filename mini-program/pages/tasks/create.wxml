<view class="container">
  <view class="form-section">
    <view class="form-item">
      <text class="required">*</text>
      <text class="label">任务标题</text>
      <input placeholder="请输入任务标题" value="{{form.title}}" bindinput="onInput" data-field="title" />
    </view>

    <view class="form-item">
      <text class="required">*</text>
      <text class="label">任务类型</text>
      <picker mode="selector" range="{{typeOptions}}" range-key="label" bindchange="onTypeChange">
        <view class="picker-value">{{typeOptions[form.typeIndex]?.label || '请选择'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="required">*</text>
      <text class="label">优先级</text>
      <picker mode="selector" range="{{priorityOptions}}" range-key="label" bindchange="onPriorityChange">
        <view class="picker-value">{{priorityOptions[form.priorityIndex]?.label || '请选择'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">关联案件</text>
      <picker mode="selector" range="{{caseOptions}}" range-key="name" bindchange="onCaseChange">
        <view class="picker-value">{{selectedCase?.name || '选择关联案件（可选）'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="label">执行人</text>
      <picker mode="selector" range="{{userOptions}}" range-key="nickname" bindchange="onUserChange">
        <view class="picker-value">{{selectedUser?.nickname || '选择执行人（可选）'}}</view>
      </picker>
    </view>
  </view>

  <view class="form-section">
    <view class="form-item">
      <text class="label">任务地点</text>
      <view class="location-picker" bindtap="chooseLocation">
        <text class="location-text">{{form.location || '点击选择位置'}}</text>
        <text class="location-icon">📍</text>
      </view>
    </view>

    <view class="form-item">
      <text class="label">截止时间</text>
      <picker mode="multiSelector" range="{{dateTimeArray}}" value="{{dateTime}}" bindchange="onDateTimeChange">
        <view class="picker-value">{{form.deadline || '选择截止时间（可选）'}}</view>
      </picker>
    </view>

    <view class="form-item vertical">
      <text class="label">任务描述</text>
      <textarea placeholder="请描述任务内容" value="{{form.description}}" bindinput="onInput" data-field="description" maxlength="500" />
    </view>

    <view class="form-item vertical">
      <text class="label">任务要求</text>
      <textarea placeholder="请描述任务要求（选填）" value="{{form.requirements}}" bindinput="onInput" data-field="requirements" maxlength="500" />
    </view>
  </view>

  <view class="form-actions">
    <button class="btn-submit" bindtap="submit" loading="{{submitting}}">创建任务</button>
  </view>
</view>
