<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <image class="user-bg" src="/assets/workbench-bg.png" mode="aspectFill" />
    <view class="user-content">
      <image class="user-avatar" src="{{userInfo.avatar}}" />
      <view class="user-info">
        <view class="user-name">{{userInfo.nickname}}</view>
        <view class="user-org" wx:if="{{userInfo.org}}">{{userInfo.org.name}}</view>
        <view class="user-role">{{roleMap[userInfo.role]}}</view>
      </view>
    </view>
    <view class="user-stats">
      <view class="stat-item">
        <text class="stat-num">{{stats.taskCount}}</text>
        <text class="stat-text">æˆ‘çš„ä»»åŠ¡</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.caseCount}}</text>
        <text class="stat-text">å‚ä¸æ¡ˆä»¶</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.dialectCount}}</text>
        <text class="stat-text">æ–¹è¨€å½•éŸ³</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.score}}</text>
        <text class="stat-text">ç§¯åˆ†</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="feature-card">
    <view class="feature-title">å¿«æ·åŠŸèƒ½</view>
    <view class="feature-grid">
      <view class="feature-item" bindtap="goToMyTasks">
        <view class="feature-icon icon-task">ğŸ“‹</view>
        <text class="feature-name">æˆ‘çš„ä»»åŠ¡</text>
      </view>
      <view class="feature-item" bindtap="goToCreateCase">
        <view class="feature-icon icon-case">ğŸ“</view>
        <text class="feature-name">ç™»è®°æ¡ˆä»¶</text>
      </view>
      <view class="feature-item" bindtap="goToCreateDialect">
        <view class="feature-icon icon-dialect">ğŸ¤</view>
        <text class="feature-name">å½•åˆ¶æ–¹è¨€</text>
      </view>
      <view class="feature-item" bindtap="goToMap">
        <view class="feature-icon icon-map">ğŸ—ºï¸</view>
        <text class="feature-name">é™„è¿‘æ¡ˆä»¶</text>
      </view>
    </view>
  </view>

  <!-- å¾…åŠä»»åŠ¡ -->
  <view class="todo-card">
    <view class="card-header">
      <view class="card-title">å¾…åŠä»»åŠ¡</view>
      <text class="card-more" bindtap="goToMyTasks">æŸ¥çœ‹æ›´å¤š ></text>
    </view>
    <view class="todo-list" wx:if="{{todos.length > 0}}">
      <view class="todo-item" wx:for="{{todos}}" wx:key="id" bindtap="goToTaskDetail" data-id="{{item.id}}">
        <view class="todo-tag priority-{{item.priority}}">{{priorityMap[item.priority]}}</view>
        <view class="todo-content">
          <view class="todo-title">{{item.title}}</view>
          <view class="todo-meta">
            <text class="todo-type">{{taskTypeMap[item.type]}}</text>
            <text class="todo-deadline" wx:if="{{item.deadline}}">æˆªæ­¢ï¼š{{item.deadline}}</text>
          </view>
        </view>
        <view class="todo-action">
          <text class="btn-do" catchtap="startTask" data-id="{{item.id}}">å»åš</text>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <image class="empty-icon" src="/assets/empty.png" mode="aspectFit" />
      <text class="empty-text">æš‚æ— å¾…åŠä»»åŠ¡</text>
    </view>
  </view>

  <!-- æœ€è¿‘åŠ¨æ€ -->
  <view class="activity-card">
    <view class="card-header">
      <view class="card-title">æœ€è¿‘åŠ¨æ€</view>
    </view>
    <view class="activity-list" wx:if="{{activities.length > 0}}">
      <view class="activity-item" wx:for="{{activities}}" wx:key="id">
        <view class="activity-dot"></view>
        <view class="activity-content">
          <view class="activity-text">{{item.content}}</view>
          <view class="activity-time">{{item.time}}</view>
        </view>
      </view>
    </view>
    <view class="empty-state" wx:else>
      <text class="empty-text">æš‚æ— åŠ¨æ€</text>
    </view>
  </view>
</view>
